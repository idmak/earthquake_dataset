# Total Electron Content (TEC) dataset

Данный репозиторий создан в рамках ВКР "Применение методов машинного обучения к задаче прогнозирования землетрясений" (СПБГУ, 2023). Мы предоставляем доступ к обработанному нами набору данных, содержащему:
- Данные о станциях GNSS (Global Navigation Satellite System)
- Оценку показаний данных TEC со станций GNSS за период 1998-2023г., 612672 наблюдния (6382 дня показаний) для каждой станции
- Итоговый датасет о данных TEC для группы сильных землетрясений

Набор содержит показания 116 станций систем позицинирования, находившихся в зоне подготовки [[1]](#prep) сильных землетрясений (магнитуды ⩾ 6).

Полученные данные предоставляют возможность применения любых алгоритмов машинного обучения. Также мы предоставляем доступ к функциям, позволяющим получить оценку значений TEC на основе ионосферных карт для любой пространственно-временной точки, что позволяет легко пополнять полученный набор данных или произвести построение своего собственного датасета.

## Источники данных

Информация о землетрясениях была взята с сайта [Геологической службы США](https://earthquake.usgs.gov) (USGS).

Ионформация о станциях GNSS были взяты с сайта  [Международного центра спутниковых систем навигации](https://igs.org/) (IGS).

Ионосферные карты были получены с сайта [Национального управления по
аэронавтике и исследованию космического пространства США ](https://spdf.gsfc.nasa.gov/) (NASA). 

## Описание данных
Все данные хранятся в формате ```.csv``` таблиц, с символом ```,``` в качестве разделителя.

### Данные станций GNSS
Оценку значений TEC, полученную из ионосферных карт, можно найти в папке ```/data/```.

Таблица ```gnss_stations.csv``` хранит информацию о станциях, которые находились в зоне подготовке сильных землетрясений, и имеет следующую структуру:

| station |	latitude |	longitude |	country | region | region_id |
|-------|------|------|---|---|--------------|
| имя станции | широта станции | долгота станции | страна, в которой расположена станция | регион, к которому относится станция | код региона |

В архиве ```stations_data.7z``` для каждой станции существует файл ```{station}.csv```, где _station_ - имя станции. Такой файл хранит оценку данных TEС в каждый доступный момент времени, полученную по координатам станции . Каждый файл имеет одинаковую структуру, доступную ниже:

| station |	datetime | date |	hour | min | tec |
|-------|------|------|---|---|--------------|
| имя станции | дата и время в формате _yyyy-mm-dd_ _hh:mm:ss_| дата в формате _yyyy-mm-dd_ | час | минута | Total Electron Content | 

Таблица ```tec_dataframe.csv``` содержит готовый для анализа датасет с временными рядами TEC для пространственно-временных точек, в которых были/не были зарегистрированы сильные землетрясения. Временные ряды представлены в виде столбцов таблицы с разрешением 15 мин, от 10 дней до землетрясения до 5 дней после. Формат таблицы представлен ниже:

| 0 |	1 | ... |	1534 | 1535 | region | is_earhquake |
|-------|------|------|---|---|--------------| ---|
| TEC в момент времени 10 дней до события 00:00 UTC | TEC в момент времени 10 дней до события 00:15 UTC | ... | TEC в момент времени 5 дней после события 23:30 UTC | TEC в момент времени 5 дней после события 23:45 UTC | Регион | Является ли событие землетрясением? |



### Вычисление и визуализация данных TEC

В папке ```/script/``` в файле ```data_derivation.ipynb``` можно найти функции, позволяющие получать собственные данные на основе ионосферных карт, а также визуализировать их. 

Функция ```build_tec_df_from_cdf``` позволят получить датасет с данными о TEC в фиксированный день на основе ионосферной карты. Формат полученной таблицы представлен ниже: 

| | | 0 | 1 |	2 | ... | 94 | 95 |
| ----- | -----|  - | - |	- | -- | - | - |
| **87.5** | **180** |  |  |	 | ... |  |  |
| **87.5** | **175** |  |  |	 | ... |  |  |
| ... | ...  |  |  | | ... |  |  |  | 
| **87.5** | **-180** |  |  |	 | ... |  |  |
| **85** | **180** |  |  |	 | ... |  |  |
| ... | ...  |  |  | | ...  |  |  |  | 
| **-87.5** | **-180**|  |  |	 | ... |  |  |

Здесь первый строчный индекс соответствует географической широте, второй - географической долготе. Столбец **0** соответствует времени 00:00 UTC, **1** - 01:15 UTC,..., **95** - 23:45 UTC.

Функция ```calculate_tec_series``` позволят получить временной ряд TEC для фиксированной географической точки в фиксированный день с частотой 15 минут. Вместе вышеописанные функции позволяют получать произвольные временные ряды для любой географической точки.

Функция  ```build_earthquake_series``` позволят по данным со станции GNSS и произвольной даты получить временной ряд TEC произвольной длины. Помимо этого, функция также подсчитывает медиану значений TEC в тот же момент времени за 10 дней до и 10 дней после, а также верхнюю и нижнюю границу значений TEC [[2]](#borders). Формат выходного файла представлен ниже:

| station |	datetime |	date |	relative_date |	hour |	min |	tec |	lower_bound | 	median |	upper_bound |
| ---- |	----- |	----- |	----- |	----- |	----- | ----- |	----- | 	----- |	----- |
| Имя станции | Дата и время в формате _yyyy-mm-dd_ _hh:mm:ss_| Дата в формате _yyyy-mm-dd_ | Относительный день | Час | Минута | Total Electron Content | Нижняя граница | Медиана | Верхняя граница |

Также в файле содержатся функции, визуализирующие данные TEC.

## Список литературы

<a name="prep">[1]</a>  I. P. Dobrovolsky, S. I. Zubkov, and V. I. Miachkin. Estimation of the
size of earthquake preparation zones. –– Geophys, 1979.

<a name="borders">[2]</a> Munawar Shah, Arslan Ahmed, Muhsan Ehsan, Majid M. Khan, Arslan Tariq, Zahid Ur Rahman, and Andres Calabia. Total electron
content anomalies associated with earthquakes occurred during 1998–2019. –– 2020.



