# Total Electron Content (TEC) dataset

Данный репозиторий создан в рамках ВКР "Применение методов машинного обучения к задаче прогнозирования землетрясений" (СПБГУ, 2023). Мы предоставляем доступ к обработанному нами набору данных, содержащему:
- Данные о станциях GNSS (Global Navigation Satellite System)
- Оценка показаний данных TEC со станций GNSS за период 1998-2023г., 612672 наблюдния (6382 дня показаний) для каждой станции
- Итоговый датасет о данных TEC для группы сильных землетрясений

Набор содержит показания 116 станций систем позицинирования, находившихся в зоне подготовки [[1]](#prep) сильных землетрясений (магнитуды ⩾ 6).

Полученные данные предоставляют возможность применения любых алгоритмов машинного обучения. Также мы предоставляем доступ к функциям, позволяющим получить оценку значений TEC на основе ионосферных карт для любой пространственно-временной точки, что позволяет легко пополнять полученный набор данных или произвести построение своего собственного датасета.

## Источники данных

Информация о землетрясениях была взята с сайта [Геологической службы США](https://earthquake.usgs.gov) (USGS).

Ионформация о станциях GNSS были взяты с сайта  [Международного центра спутниковых систем навигации](https://igs.org/) (IGS).

Ионосферные карты были получены с сайта [Национального управления по
аэронавтике и исследованию космического пространства США ](https://spdf.gsfc.nasa.gov/) (NASA). 

## Описание данных
Все данные хранятся в формате ```.csv``` таблиц, с символом ```,``` в качестве разделителя.

### Данные станций GNSS
Оценку значений TEC, полученную из ионосферных карт, можно найти в папке ```/data/```.

Таблица ```gnss_stations``` хранит информацию о станциях, которые находились в зоне подготовке сильных землетрясений, и имеет следующую структуру:

| station |	latitude |	longitude |	country | region | region_id |
|-------|------|------|---|---|--------------|
| имя станции | широта станции | долгота станции | страна, в которой расположена станция | регион, к которому относится станция | код региона |

В архиве ```{stations_data}.csv``` для каждой станции существует файл ```{station}.csv```, где _station_ - имя станции. Такой файл хранит оценку данных TEС, в каждый доступный момент времени, полученную по координатам станции . Каждый файл имеет одинаковую структуру, доступную ниже:

| station |	datetime | date |	hour | min | tec |
|-------|------|------|---|---|--------------|
| имя станции | дата и время в формате _yyyy-mm-dd_ _hh:mm:ss_| дата в формате _yyyy-mm-dd_ | час | минута | Total Electron Content | 

Таблица ``tec_dataframe.csv``` содержит готовый для анализа датасет с временными рядами TEC для пространственно-временных точек, в которых были/не были зарегестрированы сильные землетрясения. Временные ряды представлены в виде столбцов таблицы с разрешением 15 мин, от 10 дней до землетрясения до 5 дней после. Формат таблицы представлен ниже:

| 0 |	1 | ... |	1534 | 1535 | region | is_earhquake |
|-------|------|------|---|---|--------------| ---|
| TEC в момент времени 10 дней до события 00:00 UTC | TEC в момент времени 10 дней до события 00:15 UTC | ... | TEC в момент времени 5 дней после события 23:30 UTC | TEC в момент времени 5 дней после события 23:45 UTC | Регион | Является ли событие землетрясением? |



### Предвестники землетрясений

В папке ```/script/``` можно найти подсчитанные нами признаки, которые могут стать предвестниками землетрясений. Функции, позволяющие вычислить такие признаки по данным с ионозондов, расположены в файле ```/scripts/precursors_calculation.ipynb```

```running_avg/``` содержит файлы ```{sonde}_runing_avg.csv```, в которых для каждого ионозонда подсчитано скользящее среднее параметра foF2 за предшествующие 15 дней (в одинаковый момент времени). Как показано в статье _D. Davidenko & S. Pulinets_ [[2]](#mask), перед землетрясением происходит аномальное отклонение текущих значений foF2 от средних, что и является предвестником землетрясения. 

Для каждой временной точки, заданной с помощью (даты, часа, минуты) в таблице содержатся атрибуты:
- ```foF2``` - значение показателя foF2 в текущий момент;
- ```foF2_running_avg``` - скользящее среднее за предыдущие 15 дней в то же время;
- ```foF2_n_days``` - количество дней (из 15ти предшествующих), в которые значение foF2 было известно.

Другой показатель, аномальное значение которого является предвестником землетрясения, можно найти в папке ```correlation/```. В работе _S. Pulinets_ [[3]](#corr) было показано, что если два ионозонда находятся достаточно близко друг от друга, но при этом один из них попадает в зону подготовки землетрясения, а другой - нет, то корреляциях их показаний (в частности, foF2) снижается. 

В папке ```correlation/``` для близко расположенных пар зондов (sonde1, sonde2) в каждую дату подсчитаны следующие характеристики:
- ```foF2_corr``` - корреляция показаний пары ионозондов в текущую дату;	
- ```foF2_n_hours``` - количество часов, за которые доступны показания с обоих зондов;
- ```foF2_total_time_points``` - общее количество временных точек, для которых доступны показания с обоих зондов.

Третий показатель предсказывает землетрясение по отклонению показаний двух групп ионозондов: первая группа состоит из зондов в зоне подготовки землетрясения (s1), вторая - на некотором небольшом расстоянии от них (s2). Нами был выбран порог в 750 км; однако в представленных данных во вторую группу объединены все зонды, находящиеся в на расстоянии [prep_zone, max(prep_zone + 750, 2*prep_zone)] от эпицентра землетрясения, где prep_zone - радиус зоны подготовки землетрясения. 

Данные, подготовленные для расчета описанной выше характеристики, можно найти в папке ```groups_comparison/```. Для каждого землетрясения создан файл ``{earthquake_id}_s1s2.csv``, который содержит:
- отдельные показания зондов каждой из групп (в те дни, когда они не находились под влиянием каких-либо других землетрясений);
- усредненные показания каждой из групп;
- количество зондов в каждой из групп, показания которых доступны в выбранный момент времени;
- метка ``pre_eq/not_eq``, указывающая, относится ли день к периоду предсказания землетрясения (до 10 дней перед землетрясением).



